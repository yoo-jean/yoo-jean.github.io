---
title: JVM 정리 노트 ⑥ Garbage Collection 제대로 이해하기
date: 2026-01-05 16:00:00 +0900
categories: [CS, JVM]
tags: [jvm, java, runtime, gc, memory]
---

Garbage Collection(GC)은 JVM이 더 이상 사용되지 않는 객체를 자동으로 정리하여  
메모리를 회수하고 애플리케이션의 안정적인 실행을 돕는 핵심 메커니즘이다.

---

## GC가 필요한 이유

Java는 개발자가 직접 메모리를 해제하지 않는다.  
따라서 다음과 같은 문제를 방지하기 위해 GC가 필요하다.

- 더 이상 참조되지 않는 객체가 Heap에 계속 남는 문제
- 메모리 누수(Memory Leak) 위험
- 장시간 실행되는 서비스에서 메모리 고갈 방지

GC는 **사용되지 않는 객체를 자동으로 제거**하여  
개발자가 비즈니스 로직에 집중할 수 있도록 돕는다.

---

## Stop-The-World (STW)

GC가 수행되는 동안,  
애플리케이션의 모든 사용자 스레드는 일시 중단된다.  
이 상태를 **Stop-The-World(STW)** 라고 한다.

- GC 작업을 안전하게 수행하기 위해 필수
- STW 시간이 길수록 응답 지연 발생
- GC 튜닝의 핵심 목표는 **STW 시간을 최소화**하는 것

---

## GC 종류 개념 비교

### Serial GC
- 단일 스레드로 GC 수행
- 구조가 단순하고 오버헤드가 적음
- 소규모 애플리케이션, 테스트 환경에 적합

### Parallel GC
- 여러 스레드를 사용하여 GC 수행
- 처리량(Throughput) 중심
- STW는 존재하지만 GC 속도가 빠름
- **배치(Batch) 작업**에 적합

### CMS (Concurrent Mark Sweep) GC
- GC 작업을 애플리케이션 스레드와 병행 수행
- STW 시간을 줄이는 데 초점
- 단편화(Fragmentation) 문제 발생 가능
- 현재는 사용 비권장 (Deprecated)

### G1 (Garbage First) GC
- Heap을 여러 Region으로 분할하여 관리
- STW 시간을 예측 가능하게 유지
- 대용량 Heap에 적합
- Java 9 이후 기본 GC

---

## GC 종류 비교 요약

| GC 종류 | 특징 | STW | 적합한 환경 |
|---|---|---|---|
| Serial | 단순, 단일 스레드 | 큼 | 소규모, 테스트 |
| Parallel | 처리량 중심 | 있음 | 배치 처리 |
| CMS | 응답성 중심 | 짧음 | (비권장) |
| G1 | 예측 가능한 지연 | 짧고 균등 | 대규모 서비스 |

---

## 서비스 성격별 GC 선택 기준

GC 선택은 **서비스 특성**에 따라 달라진다.

- **Latency(응답 속도)가 중요한 서비스**
  - 예: 웹 서비스, API 서버
  - 👉 **G1 GC 추천**

- **처리량이 중요한 배치 작업**
  - 예: 대량 데이터 처리, 정산 작업
  - 👉 **Parallel GC 추천**

> GC 선택의 핵심은  
> “가장 빠른 GC”가 아니라 **“서비스에 가장 적합한 GC”를 선택하는 것**이다.

---

## 정리

- GC는 메모리 안정성을 위한 필수 요소
- Stop-The-World는 GC의 본질적인 특성
- GC 종류별로 지향점(응답성 vs 처리량)이 다름
- 서비스 성격에 맞는 GC 선택이 중요

---

> GC를 이해하면  
> 성능 이슈를 막연히 튜닝하는 것이 아니라  
> **문제의 원인과 방향을 명확히 설명할 수 있다.**
